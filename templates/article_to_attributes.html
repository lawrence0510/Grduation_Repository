<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>文章問題生成器</title>
    <script>
        // 定義當用戶提交文章時執行的函數
        async function submitArticle() {
            // 獲取用戶輸入的文章
            const article = document.getElementById("article").value;
            try {
                // 向後端的 /evaluate 路由發送 POST 請求
                const response = await fetch('/evaluate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    // 將文章內容作為請求體發送
                    body: JSON.stringify({ article: article })
                });
                
                // 檢查響應是否成功
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                // 解析響應中的 JSON 數據
                const data = await response.json();

                // 將生成的問題展示在頁面上
                document.getElementById("question1").innerHTML = `問題 1: ${data.question1.question} <br> 選項: ${data.question1.options.join(", ")}`;
                document.getElementById("question2").innerHTML = `問題 2: ${data.question2.question} <br> 選項: ${data.question2.options.join(", ")}`;
                document.getElementById("question3").textContent = `問題 3: ${data.question3}`;
                document.getElementById("age").textContent = data.age;
            } catch (error) {
                // 處理任何發生的錯誤
                console.error('There has been a problem with your fetch operation:', error);
            }
        }
    </script>
</head>
<body>
    <h1>文章問題生成器</h1>
    <!-- 文章輸入框 -->
    <textarea id="article" rows="10" cols="50" placeholder="請在此輸入文章..."></textarea><br>
    <!-- 提交按鈕 -->
    <button onclick="submitArticle()">送出文章</button>

    <h2>生成的問題</h2>
    <!-- 用於展示生成問題的段落 -->
    <p id="readingAge">此篇文章的適讀年齡為：<span id="age"></span>歲</p>
    <p id="question1"></p>
    <p id="question2"></p>
    <p id="question3"></p>
</body>
</html>
